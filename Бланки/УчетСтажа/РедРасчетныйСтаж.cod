--class inherited ТББ_Базовый.Базовые.БазовыйБланкРедактор "Расчетный стаж", editor УчетСтажа.РасчетныйСтаж;
class inherited МашинаРеквизитов.Базовые.блРедакторСИнтерфейсом "Расчетный стаж", editor УчетСтажа.РасчетныйСтаж;

import СИС2 classes СтроковыеФункции, ФункцииДокумента;

inobject private

  Интерфейс: УчетСтажа.интРасчетныйСтаж;

  var ФРСВ: numeric = Библио.ФРСВ(ГодСведений);

--{{ Обработчики событий шаблона

  func шаблон_ПриПроверке :Logical;
    Result = inherited шаблон_ПриПроверке;
    if Result:
      Result = not(nil in [НашеУчреждение, Субъект, ГодСведений]);
    fi;
    if (not Result):
      Message('Не допускается сохранени записи с неполными данныи (учреждение, сотрудник, год сведений)!');
    fi;
    if Result:
      Result = (МесяцевСтажа = (Mon(ДатаОкончания) - Mon(ДатаНачала)) + 1);
    fi;
    if (not Result):
      Message('Пожадуйста, проверьте корректность условных дат и месяцев стажа!');
    fi;
  end;
--}}

--{{ Обработчики событий клеток шаблона

  --@doc Модификация заголовка формы (не окна)
  func ПолеЗаголовокОкнаФормы_ПриВыводе(Cell: TemplateCell; Value: Variant; Action: Template.OutputTypes; var Format: String): String;
    Result = if(Субъект <> nil, '<b-><s-><s->' + НашеУчреждение.Имя + '<b.><s.>' + Br + Субъект.Имя, '<b-><s-><s-> <b.><s.>' + Br);
  end;

  func Поле_ПриНажатии (Cell: TemplateCell; Action: Template.ClickTypes): Logical;
    if (Cell.Contents = 'Расчет'):
      Интерфейс.Расчет;
    fi;
  end;


--}}


end